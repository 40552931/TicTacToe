Kind of cleaned up serverapp, but seg fault issues
